<div class="sect1">
<h2 id="_table_of_content">Table of content</h2>
<div class="sectionbody">
<div class="olist upperroman">
<ol class="upperroman" type="I">
<li>
<p><a href="#_quick_foreword">Quick Foreword</a></p>
</li>
<li>
<p><a href="#_setup">Setup</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#_choosing_a_cloud_hosting_provider">cloud hosting provider</a></p>
</li>
<li>
<p><a href="#_choosing_hardware">Choosing hardware</a></p>
</li>
<li>
<p><a href="#_logging_onto_your_new_server">Logging onto your new server</a></p>
</li>
<li>
<p><a href="#_creating_a_user">Creating a user</a></p>
</li>
<li>
<p><a href="#_updating_the_app_store">Updating the app store</a></p>
</li>
<li>
<p><a href="#_installing_dependencies">Installing dependencies</a></p>
</li>
<li>
<p><a href="#_starting_nginx">Starting Nginx</a></p>
</li>
<li>
<p><a href="#_setting_up_firewall">Setting up firewall</a></p>
</li>
<li>
<p><a href="#_adding_increased_security">Adding increased security</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_structure">Structure</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#_creating_some_directories">Creating some directories</a></p>
</li>
<li>
<p><a href="#Running a sample api - optional">optional</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_nginx_setup">Nginx</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#_reloading_nginx">Reloading nginx</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_domain">Domain</a></p>
</li>
<li>
<p><a href="#_certbot">Certbot</a></p>
</li>
<li>
<p><a href="#_last_words">Last words</a></p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_quick_foreword" class="sect0">Quick Foreword</h1>
<div class="paragraph">
<p>This is not a "<em>how to get your simple static webpage hosted somewhere for free</em>" quick guide. This guide will be teaching how to set up your own server, for ease of use and future deployments. If you are looking for that feel free to check out our <a href="https://google.com/">beginner course</a>. To follow along with this a remote server is strongly recommended, feel free to use a local server if you fancy. We will be teaching you how to set up a new remote server if you currently do not own one. For the sake of this course, we will be sticking to a standard Ubuntu 18.04 server.
If you know other Linux-based distributions like Debian, Centos, arch, etc. feel free to use those.
This course will roughly take about 60min.</p>
</div>
<h1 id="_setup" class="sect0">Setup</h1>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The way of the cloud.</p>
</div>
</blockquote>
</div>
<div class="sect1">
<h2 id="_choosing_a_cloud_hosting_provider">Choosing a cloud hosting provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I prefer <a href="https://www.digitalocean.com/">digital ocean</a> as a cloud server hoster service, mainly due to the amount of free credit I was given thanks to the <a href="https://education.github.com/pack">github goodie bag</a> due to my college application. Other services would be <a href="https://www.linode.com/">linode</a> and <a href="https://aws.amazon.com/">AWS</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_choosing_hardware">Choosing hardware</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you create an account over at one of those sites. You would have to create a <em>container</em> of some sort.
<a href="https://www.digitalocean.com/">Digital ocean</a> refers to this as a droplet, as will I from now.
A droplet is basically a server, when creating a droplet, choose to your liking. One option to look out for is where the server will be hosted. Close to you means lower ping. You can decide which os it will be on that droplet. For the remainder of this course, I will be demonstrating the workflow on Ubuntu 18.04. For this particular example, I chose a droplet in the 5$/month price range, which has a 1GB of memory, which is enough for a single web application and a hybrid of multiple web apps, be those static pages and or served web apps like a React.js application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging_onto_your_new_server">Logging onto your new server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You now want to set it up. For that, we need a connection to the server first. On Mac OS and Linux, this is simply done via the command line. Regardless of how you set up the authentication, either via password or ssh-key - you do the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">ssh root@yourIpAdressHere</code></pre>
</div>
</div>
<div class="paragraph">
<p>For windows, this may result in having to use a third-party application like <a href="https://www.putty.org/">putty</a>.</p>
</div>
<div class="paragraph">
<p>In case you are wondering why we use <code>root@</code> in front of the ip address, this simply specifies the username on that machine. You can think of a server like a normal desktop pc, without the desktop, without the monitor to it, you only have access to the console.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_user">Creating a user</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We <em>add</em> a user, give it sudo privileges by <em>adding Group</em> sudo to the username, then <em>switch user</em> to that newly created one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">adduser yourUsernameOfChoice
usermod -aG sudo yourUsernameOfChoice
su - yourUsernameOfChoice</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_updating_the_app_store">Updating the app store</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get update</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_dependencies">Installing dependencies</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get install git nginx ufw vim nano screen nodejs

sudo add-apt-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install python-certbot-nginx</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_nginx">Starting Nginx</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl enable nginx # in case it's
sudo systemctl start nginx # not already running</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_firewall">Setting up firewall</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ufw allow "Nginx HTTP"
sudo ufw allow "Nginx HTTPS"
sudo ufw allow "Nginx FULL"
sudo ufw allow OpenSSH
sudo ufw enable</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, you want to try reconnecting to your server via ssh-key or password.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_increased_security">Adding increased security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may use your text editor of choice, I choose vim.
You can also use nano. To do that simply replace <code>vi</code> with <code>nano</code>.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo vi /etc/ssh/sshd_config</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Just in case <a href="https://itsfoss.com/how-to-exit-vim/">you get stuck in the vim editor</a>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>In that file find the line that says
<code>PermitRootLogin yes</code> and change that to <code>PermitRootLogin no</code>.
This will remove the ability to login as root@your_ip_adress, which is what we want. Since you have to specify a username, it disallows brute-force attacks to root@your_ip_adress.</p>
</div>
<div class="paragraph">
<p><strong>ONLY DO THE FOLLOWING IF YOU HAVE PREVIOUSLY CONNECTED VIA SSH-KEY AND YOU KNOW WHAT YOU&#8217;RE DOING</strong>.<br>
I would recommend also changing <code>PasswordAuthentication yes</code> to a <code>no</code>.<br>
If you plan on doing this, be sure to also copy your previous ssh-key from root to your user profile.<br>
Your local ssh-key would need to be located under <code>/home/&lt;yourUserName&gt;/.ssh/id_rsa.pub</code>.<br>
Most times, you do not have a local .ssh folder in your home directory.
Be sure to create that via <code>mkdir /home/&lt;yourUserName&gt;/.ssh</code>.<br>
This would disallow brute-force attacks to yourusername@your_ip_adress too since it only accepts ssh-keys.</p>
</div>
<div class="paragraph">
<p>After saving the file, be sure to restart the sshd service via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl restart sshd</code></pre>
</div>
</div>
<div class="paragraph">
<p>and try reconnecting afterward, to be safe.
If you cannot connect be sure to specify the username you wish to connect to beforehand, like so<br>
<code>ssh yourUserName@your_ip_adress:22</code>. The port is not necessary to be added via cli, as that is the default port for ssh connections. When using third-party applications such as <code>putty</code> for windows to connect to the remote server, it requires a port, which is 22 by default too.</p>
</div>
<div class="paragraph">
<p>By now, you should have a secure server setup.</p>
</div>
</div>
</div>
<h1 id="_structure" class="sect0">Structure</h1>
<div class="sect1">
<h2 id="_creating_some_directories">Creating some directories</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd
mkdir -p dev/sample
mkdir prod</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_a_sample_api_optional">Running a sample API - optional</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Feel free to skip to the <a href="#nginx-setup">nginx setup</a>, as this step is <strong>purely educational</strong> and may help in understanding the following nginx setup.<br>
Now go into the newly create sample directory and install express.js and open up a new index.js file.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd dev/sample
npm init -y
npm I express --save;
vi index.js</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_index_js">index.js</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Be sure to write this to the file and save.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">const express = require('express')
const app = express()
const port = 3000

app.get('/', (req, res) =&gt; {
  res.send('Hello World!')
})

app.listen(port, () =&gt; {
  console.log(`Example app listening at http://localhost:${port}`)
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will run the file you just saved (<em>index.js</em>) on a new <a href="https://linuxize.com/post/how-to-use-linux-screen/">screen</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">screen -d -m node .</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to know how to close that screen be sure to look at <a href="https://linuxize.com/post/how-to-use-linux-screen/">this reference.</a></p>
</div>
</div>
</div>
<h1 id="_nginx_setup" class="sect0">Nginx Setup</h1>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Setting up your server as a reverse proxy</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>You may be wondering what exactly is a <a href="https://www.nginx.com/resources/glossary/reverse-proxy-server/">reverse proxy</a>. To put it simply, it&#8217;s redirects traffic to where you want it to go. This way you can handle a lot of different applications on just one server - fairly easy too.
`</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd /etc/nginx/sites-available
ls # you should see at least one file called default
# if you see a &lt;yourIpAdress&gt;.conf use that one in this example</code></pre>
</div>
</div>
<div class="paragraph">
<p>You usually want to copy the default file to a new file of this namingScheme: <code>&lt;yourDomain&gt;.conf</code>. So if you already have a domain, be sure to do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>sudo cp -a defualt &lt;yourDomainName&gt;.conf
cd ../sites-enabled
sudo ln -s ../sites-available/&lt;yourDomainName&gt;.conf ./&lt;yourDomainName&gt;.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have just created a sim-link from the <strong>sites-available</strong> to the <strong>sites-enabled</strong> directory. The sites-enabled directory is where nginx is looking for your config files. It&#8217;s the convention to use it like this.</p>
</div>
<div class="paragraph">
<p>Say we want to have a web app, that built with any front-end framework (say react.js for example) which we want running on "/", we have a wiki which we will have at "/wiki" and an api at "/api".</p>
</div>
<div class="paragraph">
<p><code>sudo vi default</code></p>
</div>
<iframe
  src="https://carbon.now.sh/embed?bg=rgba%2851%2C155%2C216%2C1%29&t=panda-syntax&wt=none&l=nginx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=server%2520%257B%250A%2520%2520%2520%2520...%2520content%250A%2520%2520%2520%2520%2523%2520Frontend%2520Application%2520With%2520react.js%250A%2520%2520%2520%2520location%2520%252F%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%2520since%2520this%2520is%2520a%2520react.js%2520application%2520we%2520need%2520to%2520serve%2520the%2520build%2520files%2520as%2520a%2520server%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%252C%2520so%2520we%2520need%2520to%2520listen%2520to%2520a%2520specific%2520port%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Forwarded-For%2520%2524proxy_add_x_forwarded_for%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Forwarded-Proto%2520%2524scheme%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Real-IP%2520%2524remote_addr%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520Host%2520%2524http_host%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_pass%2520http%253A%252F%252F127.0.0.1%253A8080%253B%250A%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%250A%2520%2520%2520%2520%2523%2520Documentation%2520-%2520Wiki%250A%2520%2520%2520%2520location%2520%252Fwiki%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%2520since%2520you%2520usually%2520build%2520a%2520wiki%252C%2520this%2520will%2520be%2520most%2520likely%2520static%2520content.%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%2520that%27s%2520why%2520we%2520alias%2520the%2520root%2520to%2520the%2520given%2520directory.%250A%2520%2520%2520%2520%2520%2520%2520%2520alias%2520%252Fvar%252Fwww%252FreactApp%252Fwiki%253B%2520%250A%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%250A%2520%2520%2520%2520%2523%2520Backend%2520Api%250A%2520%2520%2520%2520location%2520%252Fapi%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%2520this%2520will%2520also%2520be%2520a%2520server%250A%2520%2520%2520%2520%2520%2520%2520%2520%2523%2520this%2520one%2520will%2520be%2520listening%2520to%2520port%25203000%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Forwarded-For%2520%2524proxy_add_x_forwarded_for%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Forwarded-Proto%2520%2524scheme%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520X-Real-IP%2520%2524remote_addr%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_set_header%2520Host%2520%2524http_host%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520proxy_pass%2520http%253A%252F%252F127.0.0.1%253A3000%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%250A%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520...%2520content%250A%257D"
  style="width: 1024px; height: 900px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>
<div class="paragraph">
<p>There will be other content in the file, which I tried to portray with the <code>&#8230;&#8203;content</code> syntax.</p>
</div>
<div class="sect1">
<h2 id="_reloading_nginx">Reloading nginx</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we test if there are any syntax issues.<br>
For that, we do <code>sudo nginx -t</code> and if there are no errors, feel free to proceed with <code>sudo systemctl restart nginx</code>.</p>
</div>
</div>
</div>
<h1 id="_domain" class="sect0">Domain</h1>
<div class="paragraph">
<p>First, you need a custom domain. You can get some great deals on <a href="https://namecheap.com">namecheap.com</a> and <a href="https://name.com">name.com</a>.<br>
If you qualify for the <a href="https://education.github.com/pack">github goodie bag</a>, feel free to check out their options. To my recollection, you can get a free .me domain for a year! That&#8217;s a damn good deal. If not most domains cost roughly 5-8$ with the usual exceptions ranging from 0.23$ to 2000$ for popular choices.</p>
</div>
<div class="paragraph">
<p>After you get it, you would also need to add it to your server. In Digitalocean, this is fairly simple. In the project overview, you are greeted with an <strong>add domain</strong> button of sorts. There you would have to add a <a href="https://support.dnsimple.com/articles/a-record/">A-Record</a> with the domain pointing to the server&#8217;s ip.</p>
</div>
<div class="sect1">
<h2 id="_name_servers">Name servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once that is acquired, you need to point your domain&#8217;s DNS to your providers' nameservers. Every cloud hosting provider always has a couple of nameservers associated with it. For digital ocean, for example, they are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>ns1.digitalocean.com
ns2.digitalocean.com
ns3.digitalocean.com</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, we would need to go to the place, where we&#8217;d gotten our domain from (say namecheap.com) and go to our domain admin panel. By default, the domain will point to the name servers associated with the domain provider (Namecheap in this example). You simply need to change those to those of your cloud hosting provider of choice. This will take some time to fully propagate. To see if this is done you&#8217;d need to use the ping command like so.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>ping yourDomain</code></pre>
</div>
</div>
<div class="paragraph">
<p>this is how a good response looks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># for google for example
PING google.com (142.250.185.142) 56(84) bytes of data.
64 bytes from fra16s50-in-f14.1e100.net (142.250.185.142): icmp_seq=1 ttl=119 time=16.3 ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>If it finds your ip associated with the domain you can continue to the next step.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_certbot">Certbot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certbot will add certificates to your domain. All you need to know for now is, those are necessary for a secure https connection. To do so, you must have done the following:</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>added your yourDomain.conf files to <code>/etc/nginx/sites-enabled</code> via sim-link or regular file</p>
</li>
<li>
<p>tested the syntax of your config file with <code>sudo nginx -t</code></p>
</li>
<li>
<p>waited for the nameservers to be fully propagated (usually takes up to a day)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If so, let&#8217;s move on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo certbot --nginx -d yourDomainHere -d yourOtherDomainHereIfYourHaveAddedMore -d evenSubDomainsGoGere -d theDStandsForDomain</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once that is done, it will tell you if there are any errors regarding the propagation of the nameservers or the syntax of the .conf files.</p>
</div>
<div class="paragraph">
<p>After this, you are prompted with a question, that has something to do with https support. Read the question, I suggest you always answer with <code>2</code>, for reasons I can&#8217;t explain nor understand, yet it&#8217;s what I do, and I&#8217;ve been told it&#8217;s fairly important.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_last_words">Last words</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In case of confusion or errors, feel free to contact me on the <a href="https://discord.gg/SSRH28QxBT">discord</a> @rbrtbrnschn.
Hope you get it going. After that, it&#8217;s a real breeze to set up anything new on a new subdomain.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Have a great day, you person on the internet.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
</blockquote>
</div>
</div>
</div>